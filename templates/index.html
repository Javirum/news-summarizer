{% extends "base.html" %}
{% block title %}Articles â€” News Summarizer{% endblock %}
{% block content %}
<h2>Articles</h2>

<form method="get" action="/">
    <fieldset role="group">
        <input type="search" name="q" placeholder="Search articles..." value="{{ query }}">
        <button type="submit">Search</button>
    </fieldset>
</form>

{% if articles %}
<figure>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Source</th>
                <th>Sentiment</th>
                <th>Processed</th>
            </tr>
        </thead>
        <tbody>
            {% for a in articles %}
            <tr>
                <td><a href="/article/{{ a.id }}">{{ a.title }}</a></td>
                <td>{{ a.source }}</td>
                <td><span class="badge badge-{{ a.sentiment | extract_sentiment }}">{{ a.sentiment | extract_sentiment }}</span></td>
                <td>{{ a.processed_at[:10] if a.processed_at else "" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</figure>
{% else %}
<p>No articles found.{% if query %} Try a different search term or{% endif %} <a href="/fetch">fetch new articles</a>.</p>
{% endif %}
{% endblock %}
